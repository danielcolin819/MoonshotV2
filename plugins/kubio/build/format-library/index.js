this.kubio=this.kubio||{},this.kubio.formatLibrary=function(e){var t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(o,l,function(t){return e[t]}.bind(null,l));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=679)}({0:function(e,t){!function(){e.exports=this.wp.element}()},1:function(e,t){!function(){e.exports=this.wp.i18n}()},13:function(e,t,n){var o;!function(){"use strict";var n={}.hasOwnProperty;function l(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var c=typeof o;if("string"===c||"number"===c)e.push(o);else if(Array.isArray(o)){if(o.length){var r=l.apply(null,o);r&&e.push(r)}}else if("object"===c){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){e.push(o.toString());continue}for(var i in o)n.call(o,i)&&o[i]&&e.push(i)}}}return e.join(" ")}e.exports?(l.default=l,e.exports=l):void 0===(o=function(){return l}.apply(t,[]))||(e.exports=o)}()},130:function(e,t,n){"use strict";var o=n(0);t.a=function({icon:e,size:t=24,...n}){return Object(o.cloneElement)(e,{width:t,height:t,...n})}},16:function(e,t){!function(){e.exports=this.kubio.icons}()},17:function(e,t){!function(){e.exports=this.wp.blockEditor}()},18:function(e,t){!function(){e.exports=this.kubio.utils}()},2:function(e,t){!function(){e.exports=this.wp.components}()},26:function(e,t){!function(){e.exports=this.kubio.globalData}()},3:function(e,t){!function(){e.exports=this.lodash}()},33:function(e,t){!function(){e.exports=this.wp.richText}()},4:function(e,t){!function(){e.exports=this.kubio.core}()},5:function(e,t){!function(){e.exports=this.wp.primitives}()},6:function(e,t){!function(){e.exports=this.kubio.controls}()},607:function(e,t,n){"use strict";var o=n(0),l=n(5);const c=Object(o.createElement)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(o.createElement)(l.Path,{d:"M6.9 7L3 17.8h1.7l1-2.8h4.1l1 2.8h1.7L8.6 7H6.9zm-.7 6.6l1.5-4.3 1.5 4.3h-3zM21.6 17c-.1.1-.2.2-.3.2-.1.1-.2.1-.4.1s-.3-.1-.4-.2c-.1-.1-.1-.3-.1-.6V12c0-.5 0-1-.1-1.4-.1-.4-.3-.7-.5-1-.2-.2-.5-.4-.9-.5-.4 0-.8-.1-1.3-.1s-1 .1-1.4.2c-.4.1-.7.3-1 .4-.2.2-.4.3-.6.5-.1.2-.2.4-.2.7 0 .3.1.5.2.8.2.2.4.3.8.3.3 0 .6-.1.8-.3.2-.2.3-.4.3-.7 0-.3-.1-.5-.2-.7-.2-.2-.4-.3-.6-.4.2-.2.4-.3.7-.4.3-.1.6-.1.8-.1.3 0 .6 0 .8.1.2.1.4.3.5.5.1.2.2.5.2.9v1.1c0 .3-.1.5-.3.6-.2.2-.5.3-.9.4-.3.1-.7.3-1.1.4-.4.1-.8.3-1.1.5-.3.2-.6.4-.8.7-.2.3-.3.7-.3 1.2 0 .6.2 1.1.5 1.4.3.4.9.5 1.6.5.5 0 1-.1 1.4-.3.4-.2.8-.6 1.1-1.1 0 .4.1.7.3 1 .2.3.6.4 1.2.4.4 0 .7-.1.9-.2.2-.1.5-.3.7-.4h-.3zm-3-.9c-.2.4-.5.7-.8.8-.3.2-.6.2-.8.2-.4 0-.6-.1-.9-.3-.2-.2-.3-.6-.3-1.1 0-.5.1-.9.3-1.2s.5-.5.8-.7c.3-.2.7-.3 1-.5.3-.1.6-.3.7-.6v3.4z"}));t.a=c},679:function(e,t,n){"use strict";n.r(t),n.d(t,"CustomFormatsToolbar",(function(){return z}));var o=n(33),l=n(0),c=n(26),r=n(17),i=n(1),a=n(130),u=n(5),s=Object(l.createElement)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(l.createElement)(u.Path,{d:"M12.9 6h-2l-4 11h1.9l1.1-3h4.2l1.1 3h1.9L12.9 6zm-2.5 6.5l1.5-4.9 1.7 4.9h-3.2z"}));function b(e,t,n){const l=Object(o.getActiveFormat)(n,t);if(!l)return;const c=l.attributes.style;if(c){var r,i;const t=new RegExp(`${e}:(.*?)(;|$)`);return null===(r=c.match(t))||void 0===r||null===(i=r[1])||void 0===i?void 0:i.trim()}}const f=e=>{var t,n,o;return(null===(t=e.current)||void 0===t||null===(n=t.closest("[data-type]"))||void 0===n||null===(o=n.getAttribute("data-type"))||void 0===o?void 0:o.startsWith("kubio/"))||!1};var m=n(6),p=n(18),O=n(2);const j=(e,t)=>{const n=!!((null==e?void 0:e.endOffset)-(null==e?void 0:e.startOffset)),o=e&&void 0===(null==e?void 0:e.endOffset);let l=t.current;return(o||n)&&(l=e),l};function h(e){let{name:t,value:n,onChange:c,onClose:r,contentRef:i,onReset:a,currentColor:u}=e;const s=Object(o.useAnchorRef)({ref:i,value:n,settings:g}),b=Object(l.useRef)(),f=Object(l.useCallback)((e=>{const t=null==e?void 0:e.target,n=b.current;t&&null!=n&&n.contains(t)||r()}),[b.current,r]);return Object(p.useOnClickOutside)(b,f),Object(l.createElement)(O.__experimentalStyleProvider,{document:document},Object(l.createElement)(O.Popover,{value:n,className:"kubio-components-inline-color-popover kubio-color-popover",anchorRef:j(s,i),position:"bottom center",placement:"bottom"},Object(l.createElement)("div",{ref:b},Object(l.createElement)(m.GutentagColorPickerWithPalette,{defaultValue:u,onChange:e=>c(Object(o.applyFormat)(n,{type:t,attributes:{style:`color:${e}`}}),e),hasButton:!0,onButtonClick:a}))))}const v="kubio/text-color",d=Object(i.__)("Text color","kubio"),g={name:v,title:d,tagName:"span",className:"kubio-has-inline-color",attributes:{style:"style"},edit:function(e){let{value:t,onChange:n,isActive:i,activeAttributes:u,contentRef:b}=e;const[m,p]=Object(l.useState)(!1),{parseVariableColor:O}=Object(c.useGlobalDataColors)(),j=Object(l.useCallback)((()=>{p(!0)}),[]),g=Object(l.useCallback)((()=>{p(!1)}),[]),[y,k]=Object(l.useState)(null);Object(l.useEffect)((()=>{k(function(e,t){const n=Object(o.getActiveFormat)(t,e);if(!n)return;const l=n.attributes.style;var c,r;return l?null===(c=l.match(/color:(.*?)(;|$)/))||void 0===c||null===(r=c[1])||void 0===r?void 0:r.trim():void 0}(v,t))}),[]);const _=Object(l.useMemo)((()=>{if(y)return{backgroundColor:O(y)}}),[y,O]);return f(b)?Object(l.createElement)(l.Fragment,null,Object(l.createElement)(r.RichTextToolbarButton,{key:i?"text-color":"text-color-not-active",className:"kubio-format-library-text-color-button",name:i?"italic":void 0,icon:Object(l.createElement)(l.Fragment,null,Object(l.createElement)(a.a,{icon:s}),i&&Object(l.createElement)("span",{className:"kubio-format-library-text-color-button__indicator",style:_})),title:d,onClick:j}),m&&Object(l.createElement)(h,{name:v,onClose:g,activeAttributes:u,value:t,currentColor:y,onChange:(e,t)=>{k(t),n(e)},onReset:()=>{n(Object(o.removeFormat)(t,v)),g()},contentRef:b})):Object(l.createElement)(l.Fragment,null)}};var y=n(3),k=n.n(y);const _=e=>{let{name:t,children:n,...o}=e,c="RichText.ToolbarControls";return t&&(c+=`.${t}`),Object(l.createElement)(O.Fill,{name:c},n)};var x=n(8),E=n(4),C=n(16),F=n(607),w=n(13),R=n.n(w);const S=[{label:Object(i.__)("100 (thin)","kubio"),value:100},{label:Object(i.__)("200 (extra light)","kubio"),value:200},{label:Object(i.__)("300 (light)","kubio"),value:300},{label:Object(i.__)("400 (normal)","kubio"),value:400},{label:Object(i.__)("500 (medium)","kubio"),value:500},{label:Object(i.__)("600 (semi bold)","kubio"),value:600},{label:Object(i.__)("700 (bold)","kubio"),value:700},{label:Object(i.__)("800 (extra bold)","kubio"),value:800},{label:Object(i.__)("900 (heavy)","kubio"),value:900}],N=e=>{let{isActive:t,value:n,onChange:r,onReset:a,contentRef:u,formatValue:s}=e;const b=Object(o.useAnchorRef)({ref:u,value:s,settings:B}),{getFontWeights:f}=Object(c.useGlobalDataFonts)(),[h,v]=Object(l.useState)(!1),d=Object(l.useRef)(),g=k.a.get(n,"fontFamily"),y=k.a.get(n,"fontWeight"),_=f(g),w=Object(E.useDeepMemo)((()=>S.filter((e=>{let{value:t}=e;return-1!==_.indexOf(t)}))),[_]),N={value:g,onChange:e=>{const t=f(e).some((e=>e===y));t?r("fontFamily",e):r("",{fontFamily:e,fontWeight:400})}},P={value:y,onChange:e=>{r("fontWeight",e)},options:w,onReset:a},T=Object(l.useCallback)((e=>{const t=null==e?void 0:e.target,n=t&&t.closest(".block-editor-rich-text__inline-font-family, .h-select-control__popover, .kubio-fontpicker-content"),o=d.current;null!=o&&o.contains(t)||n||v(!1)}),[]);return Object(p.useOnClickOutside)(d,T),Object(l.createElement)(l.Fragment,null,Object(l.createElement)(O.ToolbarButton,{className:R()({"is-pressed":t}),icon:F.a,onClick:()=>{v((e=>!e))},label:Object(i.__)("Typography","kubio")}),h&&Object(l.createElement)(O.__experimentalStyleProvider,{document:document},Object(l.createElement)(O.Popover,{className:"block-editor-rich-text__inline-font-family",anchorRef:j(b,u),onFocusOutside:()=>v(!1),position:"bottom center",placement:"bottom"},Object(l.createElement)("div",{ref:d,className:"block-editor-rich-text__inline-format-toolbar block-editor-rich-text__inline-font-family kubio-options-popover "},Object(l.createElement)("div",{className:"block-editor-rich-text__typography-toolbar__container"},Object(l.createElement)(O.BaseControl,null,Object(l.createElement)(O.Flex,{className:"kubio-font-family-container"},Object(l.createElement)(O.FlexBlock,null,Object(l.createElement)("span",{className:"kubio-font-family-label"},Object(i.__)("Font family","kubio"))),Object(l.createElement)(O.FlexItem,null,Object(l.createElement)(m.FontPicker,Object(x.a)({label:Object(i.__)("Font family","kubio"),placeholder:Object(i.__)("Inherited","kubio")},N))),Object(l.createElement)(O.FlexItem,{className:"kubio-font-family__reset"},Object(l.createElement)(O.Button,{isSmall:!0,icon:C.ResetIcon,label:Object(i.__)("Reset","kubio"),className:"kubio-popover-options-icon",onClick:a})))),Object(l.createElement)(O.BaseControl,null,Object(l.createElement)(m.GutentagSelectControl,Object(x.a)({label:Object(i.__)("Font weight","kubio"),placeholder:Object(i.__)("Inherited","kubio"),allowReset:!0},P))))))))},P="font-family-weight",T=Object(i.__)("Font","kubio"),A=`kubio/${P}`,B={name:A,title:T,slotId:P,tagName:"span",className:`kubio-has-inline-${P}`,attributes:{style:"style"},edit:e=>{const{value:t,onChange:n,contentRef:c}=e,{isActive:r}=e,[i,a]=Object(l.useState)(""),u=b("font-family",A,t),s=function(e,t){let n=b("font-weight",e,t);return isNaN(n)||(n=parseFloat(n)),n}(A,t);Object(l.useEffect)((()=>{a(Math.random())}),[t]);const m={fontFamily:u,fontWeight:s};return f(c)?Object(l.createElement)(_,{name:P},Object(l.createElement)(N,{key:i,formatValue:t,onChange:(e,l)=>{let c=window.structuredClone(m);e?k.a.set(c,e,l):c=l,(e=>{let{fontFamily:l,fontWeight:c}=e;const r=[];l&&r.push(`font-family: ${l}`),c&&r.push(`font-weight: ${c}`);const i=r.join(";");n(Object(o.applyFormat)(t,{type:A,attributes:{style:i}}))})(c)},value:m,isActive:r,onReset:()=>{n(Object(o.removeFormat)(t,A))},contentRef:c})):Object(l.createElement)(l.Fragment,null)}},M=[B],$=M.map((e=>e.slotId)).filter(Boolean),W=()=>Object(l.createElement)(l.Fragment,null,$.map((e=>Object(l.createElement)(O.Slot,{name:`RichText.ToolbarControls.${e}`,key:e})))),z=e=>{const{addWrapper:t=!0}=e;return!0===t?Object(l.createElement)(r.BlockControls,null,Object(l.createElement)(W,null)):Object(l.createElement)(W,null)};let I=[g];I=I.concat(M),I.forEach((e=>{let{name:t,...n}=e;Object(o.registerFormatType)(t,n)}))},8:function(e,t,n){"use strict";function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o.apply(this,arguments)}n.d(t,"a",(function(){return o}))}});
